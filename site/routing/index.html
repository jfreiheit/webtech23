
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lehrmaterial, Übungen, Aufgaben und Hilfen für WebTech">
      
      
        <meta name="author" content="Jörn Freiheit">
      
      
        <link rel="canonical" href="http://freiheit.f4.htw-berlin.de/webtech/routing/">
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.7">
    
    
      
        <title>Routing und Services - WebTech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#757575">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#routing-und-services" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="WebTech" class="md-header__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WebTech
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Routing und Services
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jfreiheit/webtech" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WebTech" class="md-nav__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    WebTech
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jfreiheit/webtech" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../einfuehrung/" class="md-nav__link">
        Einführung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../html/" class="md-nav__link">
        HTML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../rwd/" class="md-nav__link">
        RWD
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        JavaScript
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../angular/" class="md-nav__link">
        Angular
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../angular2/" class="md-nav__link">
        JSON und Direktiven
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Routing und Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Routing und Services
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#single-vs-multi-page-applikationen" class="md-nav__link">
    Single- vs. Multi-Page-Applikationen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aktivieren-von-routing" class="md-nav__link">
    Aktivieren von Routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#erste-einfache-routen" class="md-nav__link">
    Erste einfache Routen
  </a>
  
    <nav class="md-nav" aria-label="Erste einfache Routen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#routen-definieren" class="md-nav__link">
    Routen definieren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routen-aufrufen" class="md-nav__link">
    Routen aufrufen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routenparameter" class="md-nav__link">
    Routenparameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    Services
  </a>
  
    <nav class="md-nav" aria-label="Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-fur-das-routing-beispiel" class="md-nav__link">
    Service für das Routing-Beispiel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verwendung-des-services" class="md-nav__link">
    Verwendung des Services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weiter-mit-parametrisierten-routen" class="md-nav__link">
    Weiter mit parametrisierten Routen
  </a>
  
    <nav class="md-nav" aria-label="Weiter mit parametrisierten Routen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwenden-der-daten" class="md-nav__link">
    Verwenden der Daten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neuladen-bei-neuer-route" class="md-nav__link">
    Neuladen bei neuer Route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arrow-funktionen" class="md-nav__link">
    Arrow-Funktionen
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routen-absichern-mit-guards" class="md-nav__link">
    Routen absichern mit Guards
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../backend/" class="md-nav__link">
        Backend (MongoDB)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../backend_pg/" class="md-nav__link">
        Backend (PostgreSQL)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../fe-be-anbindung/" class="md-nav__link">
        Frontend-Backend-Anbindung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../guards/" class="md-nav__link">
        RxJS und Guards
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../uebungen/" class="md-nav__link">
        Übungen
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../promises/" class="md-nav__link">
        Promises
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Werkzeuge
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#single-vs-multi-page-applikationen" class="md-nav__link">
    Single- vs. Multi-Page-Applikationen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aktivieren-von-routing" class="md-nav__link">
    Aktivieren von Routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#erste-einfache-routen" class="md-nav__link">
    Erste einfache Routen
  </a>
  
    <nav class="md-nav" aria-label="Erste einfache Routen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#routen-definieren" class="md-nav__link">
    Routen definieren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routen-aufrufen" class="md-nav__link">
    Routen aufrufen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routenparameter" class="md-nav__link">
    Routenparameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    Services
  </a>
  
    <nav class="md-nav" aria-label="Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-fur-das-routing-beispiel" class="md-nav__link">
    Service für das Routing-Beispiel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verwendung-des-services" class="md-nav__link">
    Verwendung des Services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weiter-mit-parametrisierten-routen" class="md-nav__link">
    Weiter mit parametrisierten Routen
  </a>
  
    <nav class="md-nav" aria-label="Weiter mit parametrisierten Routen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verwenden-der-daten" class="md-nav__link">
    Verwenden der Daten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neuladen-bei-neuer-route" class="md-nav__link">
    Neuladen bei neuer Route
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arrow-funktionen" class="md-nav__link">
    Arrow-Funktionen
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routen-absichern-mit-guards" class="md-nav__link">
    Routen absichern mit Guards
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/jfreiheit/webtech/edit/master/docs/routing.md" title="Seite editieren" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="routing-und-services">Routing und Services<a class="headerlink" href="#routing-und-services" title="Permanent link">&para;</a></h1>
<h2 id="single-vs-multi-page-applikationen">Single- vs. Multi-Page-Applikationen<a class="headerlink" href="#single-vs-multi-page-applikationen" title="Permanent link">&para;</a></h2>
<p>Wenn wir durch z.B. dieses Skript hangeln oder Wikipedia, dann stellen wir fest, dass sich nach jedem Klick auf einen Link eine neue HTML-Seite öffnet. Das wird insbesondere deutlich wenn die Entwicklungstools geöffnet sind. Jeder Klick auf einen Hyperlink erwirkt eine neue Anfrage an einen Webserver mit dem Request, eine neue HTML-Seite von diesem Webserver zu laden und im Browser zu öffnen. Es handelt sich dabei also um eine Webanwendung mit vielen (Unter-)Seiten, eine sogenannte <em>Multi-Page-Applikation (MPA)</em>. </p>
<p>Wenn wir stattdessen z.B. die Angular-Seite <code>https://angular.io</code> öffnen und uns die Developertools anschauen, dann stellen wir fest, dass kaum HTML-Code im <code>&lt;body&gt;</code>-Element enthalten ist. Stattdessen wird der gesamte HTML-Code per JavaScript im Browser eingebunden. Damit werden Inhalte in die Seite immer genau dann eingebunden, wenn sie angezeigt werden sollen. Um zwischen einzelnen Ansichten der Webanwendung zu wechseln, wird keine neue Webseite vom Webserver geholt. Stattdessen bleiben wir stets in derselben HTML-Seite (<em>Single-Page-Applikation (SPA)</em>), was sehr gut sichtbar wird, wenn wir die Developertools eingeschaltet lassen und innerhalb der Webanwendung umhernavigieren. Stattdessen werden nur Inhalte (über eine REST-API) vom Server geladen. </p>
<p>Das Hyperlink-Konzept bei Single-Page-Applikationen ist also ein anderes, als bei Multi-Page-Applikationen. Während in MPAs Hyperlinks verwendet werden, sprechen wir bei SPAs von <em>Routen</em>. Das dazugehörige Konzept heißt <em>Routing</em>. </p>
<h2 id="aktivieren-von-routing">Aktivieren von Routing<a class="headerlink" href="#aktivieren-von-routing" title="Permanent link">&para;</a></h2>
<p>Die einfachste Methode, das Routing für ein Angular-Projekt zu aktivieren, besteht darin, das Projekt mithilfe von </p>
<div class="highlight"><pre><span></span><code>ng new projektName
</code></pre></div>
<p>zu erzeugen und auf die Frage:</p>
<div class="highlight"><pre><span></span><code>? Would you like to add Angular routing? <span class="o">(</span>y/N<span class="o">)</span>
</code></pre></div>
<p>durch die Eingabe eines <code>y</code> zu antworten. Sie müssen explizit <code>y</code> eingeben, da die Standardantwort <code>N</code>, also <code>no</code> ist. Wenn Sie die Frage mit <code>yes</code> beantwortet haben, dann wird das neue Projekt mit der Datei <code>app-routing.module.ts</code> im Ordner <code>src/app</code> erzeugt. Sollte Ihnen diese Datei fehlen, dann können Sie nachträglich das Routing zu einem existierenden Projekt hinzufügen. </p>
<p>Sie können gleich bei Erstellung des Projektes angeben, dass Routing erwünscht ist, indem Sie </p>
<div class="highlight"><pre><span></span><code>ng new projektName --routing
</code></pre></div>
<p>eingeben. Dann werden Sie gar nicht mehr nach Routing gefragt, sondern dieses wird sofort mitinstalliert. </p>
<p>Sollten Sie keine Datei <code>app-routing.module.ts</code> im <code>src/app</code>-Ordner haben, dann können Sie das Routing auch noch nachträgöich aktivieren, indem Sie in Ihrem Projektordner</p>
<div class="highlight"><pre><span></span><code>ng generate module app-routing --flat --module<span class="o">=</span>app
</code></pre></div>
<p>ausführen. Dann entsteht eine solche Datei und das <code>AppRoutingModule</code> wird in der <code>app.module.ts</code> importiert: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">app.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BrowserModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span><span class="w"></span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AppComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./app.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span><span class="w"></span>
</span>
<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">AppComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">BrowserModule</span><span class="p">,</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="nx">AppRoutingModule</span><span class="w"></span>
</span><span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">bootstrap</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die Datei <code>app-routing.module.ts</code> sieht zunächst so aus (wenn Routing über die CLI mit dem Befehl <code>ng generate module app-routing --flat --module=app</code> aktiviert wurde):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CommonModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">CommonModule</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir passen diese Datei zunächst wie folgt an:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterModule</span><span class="p">,</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
</span>
<span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
</span>
<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span><span class="w"></span>
</span><span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="nx">exports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">RouterModule</span><span class="p">],</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
</span><span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In das <code>routes</code>-Array werden wir im Folgenden unsere Routen eintragen. </p>
<h2 id="erste-einfache-routen">Erste einfache Routen<a class="headerlink" href="#erste-einfache-routen" title="Permanent link">&para;</a></h2>
<p>Um das Routing auszuprobieren, benötigen wir zunächst ein paar Komponenten, zwischen denen wir wechseln können. Deshalb erstellen wir uns folgende Komponenten:</p>
<div class="highlight"><pre><span></span><code>ng g c nav
ng g c home
ng g c login
ng g c about
ng g c footer
</code></pre></div>
<p>Außerdem fügen wir unserem Projekt noch Bootstrap hinzu, damit wir ein besseres Design erzielen (hat aber nichts mit Routing zu tun):</p>
<div class="highlight"><pre><span></span><code>ng add @ng-bootstrap/ng-bootstrap
</code></pre></div>
<p>Sollten Sie beim Hinzufügen von Bootstrap einen <code>not compatible</code>-Fehler bekommen, dann versuchen Sie <code>npm install @ng-bootstrap/ng-bootstrap@bootstrap5</code>. Nach dem Hinzufügen von Bootstrap sollten Sie nochmals <code>npm install</code> ausführen, um das Bootstrap-Modul auch tatsächlich zu installieren. </p>
<p>Die Komponenten können Sie wie folgt implementieren: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:8"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><input id="__tabbed_4_5" name="__tabbed_4" type="radio" /><input id="__tabbed_4_6" name="__tabbed_4" type="radio" /><input id="__tabbed_4_7" name="__tabbed_4" type="radio" /><input id="__tabbed_4_8" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">nav.component.html</label><label for="__tabbed_4_2">footer.component.html</label><label for="__tabbed_4_3">home.component.html</label><label for="__tabbed_4_4">home.component.css</label><label for="__tabbed_4_5">about.component.html</label><label for="__tabbed_4_6">about.component.css</label><label for="__tabbed_4_7">login.component.html</label><label for="__tabbed_4_8">login.component.css</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sticky-top navbar navbar-expand-lg navbar-light bg-light&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container-fluid&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-brand&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">&gt;</span>Webtech<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-toggler&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">data-bs-toggle</span><span class="o">=</span><span class="s">&quot;collapse&quot;</span> <span class="na">data-bs-target</span><span class="o">=</span><span class="s">&quot;#navbarNavAltMarkup&quot;</span> <span class="na">aria-controls</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span> <span class="na">aria-expanded</span><span class="o">=</span><span class="s">&quot;false&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle navigation&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-toggler-icon&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;collapse navbar-collapse&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-nav&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">&gt;</span>About<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fixed-bottom text-white-50 bg-dark p-3 text-center&quot;</span><span class="p">&gt;</span>
    Routing
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;d-flex align-items-center min-vh-100&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container text-center&quot;</span><span class="p">&gt;</span>
        Welcome home!
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">main</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="kc">grey</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;d-flex align-items-center min-vh-100&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container text-center&quot;</span><span class="p">&gt;</span>
        Everything about me...
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">main</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">lightgrey</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;d-flex align-items-center min-vh-100&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container col-4 col-offset-4&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;login1&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;username&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;login2&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">main</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgb</span><span class="p">(</span><span class="mi">164</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">243</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die <code>app.component.html</code> sieht nun wie folgt aus:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">app.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">app-nav</span><span class="p">&gt;&lt;/</span><span class="nt">app-nav</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">app-footer</span><span class="p">&gt;&lt;/</span><span class="nt">app-footer</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Diese ist so gestaltet, dass oben die <code>nav</code>-Komponente und unten die <code>footer</code>-Komponente  eingebunden wird. Dazwischen steht jedoch der Komponentenselektor <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>. An dessen Stelle wird nun jeweils die Komponente eingesetzt, die wir durch das Routing ausgewählt haben. Dies erledigen wir in den folgenden beiden Schritten.</p>
<h3 id="routen-definieren">Routen definieren<a class="headerlink" href="#routen-definieren" title="Permanent link">&para;</a></h3>
<p>Zunächst definieren wir die Routen und zu jeder Route, welche Komponente dafür eingebunden wird. Die Routendefinitionen erfolgen in der <code>app-routing.module.ts</code> und dort im <code>routes</code>-Array. Dazu wird das <code>routes</code>-Array mit Objekten befüllt, die jeweils einen <code>path</code>-Eintrag und einen <code>component</code>-Eintrag erhalten. Ein solches Objekt legt fest, für welchen Pfad welche Komponente aufgerufen wird. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./about/about.component&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterModule</span><span class="p">,</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">},</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">},</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;home&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span class="p">];</span><span class="w"></span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">exports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">RouterModule</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Testen Sie nun die URLs</p>
<div class="highlight"><pre><span></span><code>http://localhost:4200/about
http://localhost:4200/home
http://localhost:4200/login
</code></pre></div>
<p>und Sie sehen jeweils, dass die für die jeweilige Route angegebene Komponente eingebunden wird. Der <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>-Selektor wird also dynamisch befüllt, je nachdem welche Route aufgerufen wird. </p>
<p>Eine Sache ist jetzt jedoch ncoh nicht optimal. Erstens ist ganz am Anfang, also für <code>http://localhost:4200</code> gar keine Komponente eingebunden und zweitens soll unsere <code>home</code>-Komponente gar nicht unter einer extra Route (<code>http://localhost:4200/home</code>), sondern tatsächlich bereits unter <code>http://localhost:4200</code>  aufgerufen werden. Wir passen deshalb das <code>routes</code>-Array entsprechend an:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./about/about.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterModule</span><span class="p">,</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">pathMatch</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;full&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">exports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">RouterModule</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die neuhinzugefügte Eigenschaft <code>pathMatch: 'full'</code> gibt an, dass diese Route nur aufgerufen wird, wenn danach nichts weiter in der URL folgt. Die Auswahl der Routen erfolgt nach dem <em>first-match-Prinzip</em>. Das heißt, dass für die angegebene URL die erste Route ausgewählt wird, die "passt". Mit <code>pathMatch: 'full'</code> geben wir an, dass die Route zwar passen muss, aber nicht nur ein Präfix einer längeren Route sein darf. Nun funktionieren die Routen wie gewünscht:</p>
<div class="highlight"><pre><span></span><code>http://localhost:4200
http://localhost:4200/about
http://localhost:4200/login
</code></pre></div>
<p>Für die erste URL wird die <code>home</code>-Komponente eingebunden, bei der zweiten die <code>about</code>-Komponente und bei der dritten die <code>login</code>-Komponente. Nun müssen wir noch organisieren, wie die Routen innerhalb unserer Anwendung aufgerufen werden können (und nicht nur durch Eingabe der jeweiligen URL).</p>
<h3 id="routen-aufrufen">Routen aufrufen<a class="headerlink" href="#routen-aufrufen" title="Permanent link">&para;</a></h3>
<p>Wir wollen die Routen durch Mausklick aufrufen. Dafür bietet sich unser Navigationsmenü an. Routen werden <strong>nicht</strong> per <code>href</code>-Attribut aufgerufen, sondern per <code>routerLink</code>. Wir passen dazu unsere <code>nav</code>-Komponente an:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">nav.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sticky-top navbar navbar-expand-lg navbar-light bg-light&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container-fluid&quot;</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-brand&quot;</span> <span class="na">routerLink</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>Webtech<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-toggler&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">data-bs-toggle</span><span class="o">=</span><span class="s">&quot;collapse&quot;</span> <span class="na">data-bs-target</span><span class="o">=</span><span class="s">&quot;#navbarNavAltMarkup&quot;</span> <span class="na">aria-controls</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span> <span class="na">aria-expanded</span><span class="o">=</span><span class="s">&quot;false&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle navigation&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-toggler-icon&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;collapse navbar-collapse&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-nav&quot;</span><span class="p">&gt;</span>
<span class="hll">                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">routerLink</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">routerLink</span><span class="o">=</span><span class="s">&quot;login&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">routerLink</span><span class="o">=</span><span class="s">&quot;about&quot;</span><span class="p">&gt;</span>About<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span>            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir können das <code>routerLink</code>-Attribut auch unter Verwendung von <a href="../angular2/#property-bindings">Property Binding</a> festlegen (dann kann Routing später sogar über Variablen erfolgen). Wenn Sie beim <em>Property Binding</em> den Wert als <code>String</code> festlegeen, dann muss dieser <code>String</code> in eigenen Hochkomma in den Wert des <em>Property Binding</em> geschrieben werden, also z.B. so:</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="nx">routerLink</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;&#39;login&#39;&quot;</span><span class="w"></span>
<span class="p">[</span><span class="nx">routerLink</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;&#39;about&#39;&quot;</span><span class="w"></span>
<span class="p">[</span><span class="nx">routerLink</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;&#39;&#39;&quot;</span><span class="w"></span>
</code></pre></div>
<p>Angenommen, Sie definieren sich noch eine eigene CSS-Klasse, in der sie festlegen, dass die Menüeinträge anders aussehen, wenn sie der aktuellen Route entsprechen, wenn also z.B. <code>Login</code> im Menü fett erscheint, sobald <code>http://localhost:4200/login</code> ausgewählt wurde. Die CSS-Definition könnte dann so aussehen:</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">myactive</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Das heißt, Sie haben eine CSS-Klasse <code>myactive</code> definiert. Diese Klasse kann aktiviert werden, wenn die Route aktiv ist. Dazu verwenden Sie das Attribut <code>routerLinkActive</code> und weisen diesem Attribut den Wert <code>"myactive"</code> zu. Das Menü sähe dann so aus:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;collapse navbar-collapse&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-nav&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;&#39;&quot;</span> <span class="na">routerLinkActive</span><span class="o">=</span><span class="s">&quot;myactive&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;</span><span class="na">login</span><span class="err">&#39;&quot;</span> <span class="na">routerLinkActive</span><span class="o">=</span><span class="s">&quot;myactive&quot;</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;</span><span class="na">about</span><span class="err">&#39;&quot;</span> <span class="na">routerLinkActive</span><span class="o">=</span><span class="s">&quot;myactive&quot;</span><span class="p">&gt;</span>About<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Wenn Sie Bootstrap verwenden, dann ist <code>routerLinkActive</code> nur für eigene CSS-Klassen notwendig (so wie im Beispiel <code>myactive</code>). Die Bootstrap-Klasse <code>active</code> wird automatisch aktiviert, wenn die Route aktiv ist. </p>
<h3 id="routenparameter">Routenparameter<a class="headerlink" href="#routenparameter" title="Permanent link">&para;</a></h3>
<p>Häufig sollen aus einer Liste von Objekten ein einzelnes Objekt ausgewählt und dargestellt werden. Angenommen, wir wollen erneut die <code>staedte.json</code> aus <a href="../angular2/#json-und-direktiven">JSON und Direktiven</a> verwenden. Wir einfachen es diesmal ein wenig und verwenden direkt das Array und beschreiben die JavaScript-Objekte nicht in JSON, sondern direkt als Objekte (der Unterschied besteht darin, dass die Schlüssel nicht in Anführungsstrichen stehen).</p>
<details>
<summary>staedte als Array</summary>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">1237</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/berlin.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">1624</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/New_York_City&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/newyork.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">1252</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Stockholm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Stockholm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/stockholm.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">1827</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bremerhaven&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bremerhaven&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bremerhaven.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bremen&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bremen&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bremen.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">1202</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bernau&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bernau_bei_Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bernau.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">929</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Brandenburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Brandenburg_an_der_Havel&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/brandenburg.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">805</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Magdeburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Magdeburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/magdeburg.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">1222</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Marburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Marburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/marburg.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">766</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mannheim&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Mannheim&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/mannheim.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="err">id</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">jahr</span><span class="p">:</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">s</span><span class="kc">ta</span><span class="err">d</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mainz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Mainz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">bild</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/images/mainz.png&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>
</details>
<p>sowie den Ordner <a href="../files/images_staedte.zip">images</a> und greifen über die Route auf ein einzelnes Objekt zu. Wenn wir also z.B. <code>http://localhost:4200/cities/0</code> eingeben, soll das <code>Berlin</code>-Objekt ausgewählt werden, bei <code>http://localhost:4200/cities/1</code> das <code>New York</code>-Objekt usw. </p>
<p>Dazu erstellen wir uns zunächst eine neue Componente <code>cities</code> mit <code>ng g c cities</code> und folgendem Code:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:4"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><input id="__tabbed_9_4" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">cities.component.html</label><label for="__tabbed_9_2">cities.component.ts</label><label for="__tabbed_9_3">cities.component.css</label><label for="__tabbed_9_4">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Städte<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>


    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span>Ausgewählte Städte<span class="p">&lt;/</span><span class="nt">caption</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Nr<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Jahr<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Stadt<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Bild<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot; let stadt of staedte; let i=index &quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ i+1 }} <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ stadt.jahr }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ stadt.stadt }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">href</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">link</span><span class="err">&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">img</span> <span class="err">[</span><span class="na">src</span><span class="err">]=&quot;</span> <span class="na">stadt</span><span class="err">.</span><span class="na">bild</span> <span class="err">&quot;</span> <span class="err">[</span><span class="na">alt</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">stadt</span> <span class="err">&quot;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-cities&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./cities.component.html&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">styleUrls</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;./cities.component.css&#39;</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">staedte</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1237</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/berlin.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1624</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/New_York_City&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/newyork.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1252</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Stockholm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Stockholm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/stockholm.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1827</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Bremerhaven&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bremerhaven&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bremerhaven.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">150</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Bremen&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bremen&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bremen.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1202</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Bernau&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bernau_bei_Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bernau.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">929</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Brandenburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Brandenburg_an_der_Havel&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/brandenburg.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">805</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Magdeburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Magdeburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/magdeburg.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1222</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Marburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Marburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/marburg.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">766</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Mannheim&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Mannheim&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/mannheim.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                  </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">782</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Mainz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Mainz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/mainz.png&quot;</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">              </span><span class="p">];</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">td</span><span class="w"> </span><span class="nt">img</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./about/about.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterModule</span><span class="p">,</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./cities/cities.component&#39;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">pathMatch</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;full&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cities&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">exports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">RouterModule</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Zunächst lagern wir die Daten in einen <em>Service</em> aus.</p>
<h2 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h2>
<p>Ein <em>Service</em> ist eine Klasse für einen konkreten Zweck. Services unterscheiden sich von Komponenten dahingehend, dass</p>
<ul>
<li>eine Komponente für die Nutzerinteraktion zuständig ist, </li>
<li>eine Komponente Eigenschaften (Daten) präsentiert, </li>
<li>eine Komponente Methoden zur Datenbindung (<em>data binding</em>) zur Verfügung stellt, um</li>
<li>zwischen <em>View</em> und Anwendungslogik zu vermitteln.</li>
</ul>
<p>Ein Service</p>
<ul>
<li>erfüllt eine konkrete Aufgabe, typischerweise mit Daten, </li>
<li>ohne sich um die Darstellung der Daten zu kümmern.</li>
<li>Typische Aufgaben eines Services sind: Daten vom Server holen oder auf den Server laden, Nutzereingaben zu validieren. </li>
<li>Ein Service steht typischerweise allen Komponenten zur Verfügung (aber nicht jede Komponente muss einen Service nutzen).</li>
</ul>
<p>Ein Service ist eine Klasse mit dem Decorator <code>@Injectable()</code>. Services enthalten Anwendungslogik, die aus Komponenten ausgelagert werden kann. Ein Service kann mittels CLI so erzeugt werden:</p>
<div class="highlight"><pre><span></span><code>ng generate service nameDesServices
</code></pre></div>
<p>In dem Decorator <code>@Injectable()</code> wird mittels <code>providedIn: root</code> angegeben, dass der Service von allen Komponenten innerhalb des Root-Moduls genutzt werden kann. Ist der Service von anderen Services oder Komponenten abhängig, können diese Services oder Komponenten mittels <em>dependency injection</em> als Parameter des Service-Konstruktor eingebunden werden. Hier ein allgemeines Beispiel eines Services <code>MyService</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">my.service.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MyService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">myDependency</span><span class="o">:</span><span class="w"> </span><span class="nx">MyDependency</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Der Service kann dann mittels <em>dependency injection</em> von einer Komponente verwendet werden. Beispiel:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">example.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">OnInit</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">MyService</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./shared/my.service&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-example&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./example.component.html&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">styleUrls</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;./example.component.css&#39;</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ExampleComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">myService</span><span class="o">:</span><span class="w"> </span><span class="nx">MyService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">methodOfMyService</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Für weiterführende Informationen siehe <a href="https://angular.io/guide/architecture-services">https://angular.io/guide/architecture-services</a>.</p>
<h3 id="service-fur-das-routing-beispiel">Service für das Routing-Beispiel<a class="headerlink" href="#service-fur-das-routing-beispiel" title="Permanent link">&para;</a></h3>
<p>Für unser Routing-Beispiel wollen wir Daten über einen Service allen Komponenten zur Verfügung stellen. Wir erstellen dazu einen Service <code>data</code> und dazu auch noch ein <em>Interface</em> <code>data</code>, das das Datenmodell für eine <code>Stadt</code> beschreibt. Beides erstellenb wir in einem <code>shared</code>-Ordner.</p>
<p>Mit </p>
<div class="highlight"><pre><span></span><code>ng g service shared/data
</code></pre></div>
<p>lassen wir die CLI den Service erstellen. Im Ordner <code>shared</code> entstehen zwei Dateien:</p>
<ul>
<li><code>data.service.ts</code> und </li>
<li><code>data.service.spec.ts</code>.</li>
</ul>
<p>Letztere ist für Testzwecke und interessiert uns (derzeit noch) nicht. In diesen Service binden wir gleich unsere Daten ein und stellen eine Funktion zur Verfügung, die uns alle Daten nach außen zur Verfügung stellt. Zunächst erstellen wir noch, zur Gewährleistung der Typsicherheit, ein <em>Interface</em> für das Datenmodell:</p>
<div class="highlight"><pre><span></span><code>ng g interface shared/data
</code></pre></div>
<p>Es entsteht eine Datei <code>data.ts</code> mit folgendem Inhalt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">shared/data.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kr">interface</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>In dieses Interface tragen wir unser Datenmodell ein (wir erweitern unsere Daten um eine <code>id</code>, um diese nicht "berechnen" zu müssen):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">shared/data.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kr">interface</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Dem <code>data</code>-Service fügen wir nun das <code>staedte</code>-Array zu und importieren das Interface <code>Data</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">shared/data.service.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./data&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">DataService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="p">[];</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1237</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/berlin.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1624</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/New_York_City&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/newyork.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1252</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Stockholm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Stockholm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/stockholm.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1827</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Bremerhaven&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bremerhaven&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bremerhaven.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">150</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Bremen&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bremen&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bremen.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1202</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Bernau&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Bernau_bei_Berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/bernau.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">929</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Brandenburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Brandenburg_an_der_Havel&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/brandenburg.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">805</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Magdeburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Magdeburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/magdeburg.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">1222</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Marburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Marburg&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/marburg.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">766</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Mannheim&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Mannheim&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/mannheim.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">11</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">jahr</span><span class="o">:</span><span class="w"> </span><span class="mf">782</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">stadt</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Mainz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">link</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://de.wikipedia.org/wiki/Mainz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nx">bild</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assets/images/mainz.png&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">];</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nx">getAll</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Angenommen, die Datei <code>staedte.json</code> liegt im <code>assets</code>-Ordner, dann können Sie die Datei auch wie folgt einlesen (anstatt die Daten in den Service zu kopieren):</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="nx">getAll</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;./assets/staedte.json&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">staedteObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">staedteObj</span><span class="p">.</span><span class="nx">staedte</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Beachten Sie, dass Sie dann eine <code>Promise</code> zurückgeben, d.h. den Aufruf von <code>getAll()</code> können Sie dann wieder <code>then()</code>-verketten (oder <code>await/async</code> verwenden). </p>
<h3 id="verwendung-des-services">Verwendung des Services<a class="headerlink" href="#verwendung-des-services" title="Permanent link">&para;</a></h3>
<p>Wir zeigen die Verwendung des Services zunächst am Beispiel der <code>cities</code>-Komponente. Dort hatten wir bisher die Daten direkt gespeichert. Nun sollen sie dort über den Service eingebunden werden. Dazu ändern wir die <code>cities.component.ts</code> wie folgt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">cities.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DataService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./../shared/data.service&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../shared/data&#39;</span><span class="p">;</span><span class="w"></span>
</span>
<span class="err">@</span><span class="nx">Component</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-cities&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./cities.component.html&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">styleUrls</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;./cities.component.css&#39;</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="nx">staedte</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="p">[];</span><span class="w"></span>
</span>
<span class="hll"><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">ds</span><span class="o">:</span><span class="w"> </span><span class="nx">DataService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">staedte</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">ds</span><span class="p">.</span><span class="nx">getAll</span><span class="p">();</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span>
<span class="w">  </span><span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Der Service wird per <em>Dependency Injection</em> eingebunden (Zeile <code>13</code>). Damit ist <code>ds</code> (die Referenz auf den Service) eine weitere Objekteigenschaft der <code>cities</code>-Komponent. Wir rufen die <code>getAll()</code>-Funktion des Services auf, die alle Daten des <code>staedte</code>-Arrays zurückgibt und speichern diese in der <code>staedte</code>-Variablen (Zeile <code>14</code>). Diese ist vonm Typ <code>Data[]</code> (Zeile <code>11</code>). Um diesen Typ zu kennen, muss das Interface <code>Data</code> in die Komponente importiert werden (Zeile <code>3</code>). Unsere Anwendung funktioniert nun wieder exakt wie zuvor. </p>
<h2 id="weiter-mit-parametrisierten-routen">Weiter mit parametrisierten Routen<a class="headerlink" href="#weiter-mit-parametrisierten-routen" title="Permanent link">&para;</a></h2>
<p>Denselben Service wollen wir nun auch in der <code>city</code>-Komponente verwenden, in der wir eine einzelne Stadt nach ihrer <code>id</code> auswählen und darstellen wollen. Dazu erweitern wir zunächst den <code>data</code>-Service um eine Funktion, die uns ein einzelnes Stadt-Objekt für eine gegebene <code>id</code> zurückgibt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">shared/data.service.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./data&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">DataService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="p">[];</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="cm">/* rausgekuerzt, muss aber bleiben! */</span><span class="w">  </span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nx">getAll</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="hll"><span class="w">  </span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="o">-</span><span class="mf">1</span><span class="p">];</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Diese Funktion ist sehr einfach gehalten. Angenommen, die <code>id=1</code> wird übergeben, dann wird das erste Element (<code>index=0</code>) zurückgegeben, also das <code>Berlin</code>-Objekt. Problem dieser Funktion ist, dass gar nicht überprüft wird, ob es sich bei <code>id-1</code> um einen korrekten Index aus dem Array handelt. Eine Möglichkeit, dieses Problem zu umgehen, wäre z.B. die Verwendung der Modulo-Funktion für die <code>id</code> über die Länge des Arrays, z.B. so:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">id</span><span class="o">-</span><span class="mf">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Wir lassen die Funktion aber bewusst so, um zu zeigen, wie wir mit <code>undefined</code> Ergebnissen umgehen könnten. </p>
<p>Die Tabelle, die wir in <code>cities.somponent.html</code> erzeugen, erweitern wir um eine Spalte, in der wir die Links auf die Detailseiten der jeweiligen Stadt hinterlegen:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">cities.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Städte<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span>Ausgewählte Städte<span class="p">&lt;/</span><span class="nt">caption</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Nr<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Jahr<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Stadt<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;</span>Bild<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="hll">                <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span>            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot; let stadt of staedte; let i=index &quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ i+1 }} <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ stadt.jahr }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ stadt.stadt }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">href</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">link</span><span class="err">&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">img</span> <span class="err">[</span><span class="na">src</span><span class="err">]=&quot;</span> <span class="na">stadt</span><span class="err">.</span><span class="na">bild</span> <span class="err">&quot;</span> <span class="err">[</span><span class="na">alt</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">stadt</span> <span class="err">&quot;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="hll">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
</span><span class="hll">                    <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">cities</span><span class="err">&#39;,</span> <span class="err">(</span><span class="na">i</span><span class="err">+</span><span class="na">1</span><span class="err">)]&quot;</span><span class="p">&gt;</span>Detail<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">                <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span>            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir sehen darin, dass der Wert für <code>routerLink</code> auch ein Array sein kann, dessen erster Eintrag die Route und dessen zweiter Eintrag eine anschließende <code>/id</code> sein kann. Der so beschriebene Wert ergibt dann die Routen <code>/cites/1</code>, <code>/cities/2</code> usw. Es hätte auch funktioniert, wenn wir <code>&lt;a [routerLink]="'/cities/'+(i+1)"&gt;Detail&lt;/a&gt;</code> geschrieben hätten. </p>
<p>Wenn wir nun in der Tabelle auf <code>Detail</code> klicken (z.B. in der <code>Berlin</code>-Zeile), dann ist die Route <code>/cities/1</code>. In der <code>city</code>-Komponente wollen wir diese Zahl auslesen. Dazu erweiteren wir unser <code>routes</code>-Array in der <code>app-routing.module.ts</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CityComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./cities/city/city.component&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./about/about.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterModule</span><span class="p">,</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./cities/cities.component&#39;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">pathMatch</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;full&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cities&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cities/:id&quot;</span><span class="p">,</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CityComponent</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span class="p">];</span><span class="w"></span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">exports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">RouterModule</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wir definieren darin, dass wir den Zahlenwert an der Route als <code>id</code> auslesen werden. Der Doppelpunkt <code>:</code> steht für eine parametrisierte Route. Der Name für <code>id</code> ist frei wählbar. Wir werden aber gleich sehen, wie dieser Name verwendet wird. Diesen Wert wollen wir nun in der <code>city</code>-Komponente auslesen, um zu erkennen, welche Stadt ausgewählt wurde. Dazu erweiteren wir die <code>city.component.ts</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">city.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ActivatedRoute</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;src/app/shared/data&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DataService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;src/app/shared/data.service&#39;</span><span class="p">;</span><span class="w"></span>
</span>
<span class="err">@</span><span class="nx">Component</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-city&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./city.component.html&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">styleUrls</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;./city.component.css&#39;</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">CityComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="nx">stadt</span><span class="o">!:</span><span class="w"> </span><span class="nx">Data</span><span class="p">;</span><span class="w"></span>
</span>
<span class="hll"><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span><span class="w"> </span><span class="nx">route</span><span class="o">:</span><span class="w"> </span><span class="nx">ActivatedRoute</span><span class="p">,</span><span class="w"> </span><span class="kr">private</span><span class="w"> </span><span class="nx">ds</span><span class="o">:</span><span class="w"> </span><span class="nx">DataService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</span>
<span class="w">  </span><span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">stadt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">ds</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span><span class="w"></span>
</span><span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen zum Code:</p>
<ul>
<li>In den Zeilen <code>2-4</code> werden das Modul <code>ActivatedRoute</code>, das Interface <code>Data</code> und der Service <code>DataService</code> importiert. <code>ActivatedRoute</code> benötigen wir zum Auslesen der aktiven Route, also insbesondere zum Auslesen der <code>id</code>, die an die Route gehängt ist. </li>
<li>In Zeile <code>12</code> deklarieren wir uns eine Variable <code>id</code>, in der wir genau diese <code>id</code> der Route speichern wollen. </li>
<li>In Zeile <code>13</code> deklarieren wir uns eine Variable <code>stadt</code>. Diese ist vom Typ <code>Data</code> (unserem Interface). Beachten Sie das <code>!</code> hinter dem Variablennamen. Hierbei handelt es sich um eine <em>Assertion</em>, also Zusicherung. Es handelt sich um den <em>Non-null assertion operator</em>. Damit wird dem TypeScript-Compiler mitgeteilt, dass er sich nicht darum kümmern muss, ob der Wert dieser Variable <code>null</code> ist oder nicht. Tatsächlich werden wir sogar den Fall berücksichtigen, dass der Wert <code>null</code> sein kann.</li>
<li>In Zeile <code>14</code> wird sowohl der <code>DataService</code> als auch <code>ActivatedRoute</code> per <em>dependency injection</em>  eingebunden. Den <code>DataService</code> benötigen wir, um das entsprechende <code>stadt</code>-Objekt zu erhalten und <code>ActivatedRoute</code> wird benötigt, um die Zahl (<code>id</code>) zu ermitteln, die bei der aktuellen Route angegeben ist. </li>
<li>In Zeile <code>18</code> wird genau diese Route ausgelesen. Insbesondere wird hier jetzt der Name verwendet, der in <code>app-routing.module.ts</code> für den Routen-Parameter vergeben wurde (also hier <code>id</code>). Dieser Wert wird als <code>string</code> zurückgegeben. Er wird mit <code>Number</code> zu <code>number</code> konvertiert. Wichtig ist, dass <code>snapshot</code> genau einmal die Route ausliest (beim Initialisieren der Komponente), aber nicht ständig auf Änderungen der Route hört. </li>
<li>In Zeile <code>19</code> wird die <code>id</code> verwendet, um der <code>getOne()</code>-Funktion des <code>DataService</code> übergeben zu werden. Diese Funktion liefert die entsprechende <code>stadt</code> aus dem <code>staedte</code>-Array zurück. </li>
</ul>
<h3 id="verwenden-der-daten">Verwenden der Daten<a class="headerlink" href="#verwenden-der-daten" title="Permanent link">&para;</a></h3>
<p>Wie die Werte der Daten nun in der <code>city.component.html</code> verwendet werden, bleibt natürlich Ihnen überlassen. Wir zeigen hier die einfache Verwendung mithilfe einer Bootstrap-<code>card</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="20:1"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">city.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;stadt&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-5&quot;</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card m-4&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 30%&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card-img-top&quot;</span> <span class="err">[</span><span class="na">src</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">bild</span><span class="err">&quot;</span> <span class="err">[</span><span class="na">alt</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">stadt</span><span class="err">&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card-body&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>Willkommen in {{ stadt.stadt }} <span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary m-4 px-4&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/</span><span class="na">cities</span><span class="err">&#39;&quot;</span><span class="p">&gt;</span>Zurück zur Liste<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;!stadt&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Leider wurde keine Stadt gefunden<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary m-4 px-4&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/</span><span class="na">cities</span><span class="err">&#39;&quot;</span><span class="p">&gt;</span>Zurück zur Liste<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Zwei Dinge sind zu beachten: </p>
<ol>
<li>Es wird unterschieden, ob die Variable <code>stadt</code> einen Wert hat (also auf ein Stadt-Objekt zeigt) oder nicht (also noch <code>undefined</code> ist). Letzteres kann dadurch entstehen, dass die <code>getOne()</code>-Funktion des <code>DataService</code> kein Objekt zurückgeliefert hat, nämlich dann, wenn die übergebene <code>id</code> keinem <code>index</code> im Array entsprach (siehe obige Diskussion dieser Funktion). Sollte <code>stadt</code> noch <code>undefined</code> sein, dann wird <code>Leider wurde keine Stadt gefunden</code> angezeigt. </li>
<li>Es wurde ein Anchorelement (<code>&lt;a&gt;</code>) eingefügt, um wieder zurück zur Liste zu gelangen. Hierbei ist zu erwähnen, dass es wichtig ist, dass die Route <code>'/cities'</code> lautet und nicht nur <code>'cities'</code>. Im letzteren Fall würde <code>cities</code> einfach an die aktuelle Route angehängt werden, also dann z.B. <code>/cities/1/cities</code> lauten. </li>
</ol>
<h3 id="neuladen-bei-neuer-route">Neuladen bei neuer Route<a class="headerlink" href="#neuladen-bei-neuer-route" title="Permanent link">&para;</a></h3>
<p>Angenommen, wir erweitern die <code>city.component.html</code> um zwei weitere Navigationsbuttons, um zwischen den einzelnen Städten "zu blättern":</p>
<div class="tabbed-set tabbed-alternate" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">city.component.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;stadt&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-5&quot;</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card m-4&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: 30%&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card-img-top&quot;</span> <span class="err">[</span><span class="na">src</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">bild</span><span class="err">&quot;</span> <span class="err">[</span><span class="na">alt</span><span class="err">]=&quot;</span><span class="na">stadt</span><span class="err">.</span><span class="na">stadt</span><span class="err">&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card-body&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>Willkommen in {{ stadt.stadt }} <span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary m-4 px-4&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">cities</span><span class="err">&#39;,</span> <span class="na">stadt</span><span class="err">.</span><span class="na">id-1</span><span class="err">]&quot;</span><span class="p">&gt;</span> <span class="ni">&amp;lt;</span> <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary m-4 px-4&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/</span><span class="na">cities</span><span class="err">&#39;&quot;</span><span class="p">&gt;</span>Zurück zur Liste<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary m-4 px-4&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">cities</span><span class="err">&#39;,</span> <span class="na">stadt</span><span class="err">.</span><span class="na">id</span><span class="err">+</span><span class="na">1</span><span class="err">]&quot;</span><span class="p">&gt;</span> <span class="ni">&amp;gt;</span> <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;!stadt&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Leider wurde keine Stadt gefunden<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary m-4 px-4&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/</span><span class="na">cities</span><span class="err">&#39;&quot;</span><span class="p">&gt;</span>Zurück zur Liste<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn wir nun auf einen solchen Navigationsbutton klicken, dann sehen wir, dass sich im URL-Fenster die Route ändert. Jedoch erscheint keine neue Stadt. Das liegt daran, dass die Route nicht automatisch neu geladen wird, wenn sich die Route ändert. Das liegt an der <code>RouteReuseStrategy</code> (siehe <a href="https://angular.io/api/router/RouteReuseStrategy">hier</a>). Darin wird festgelegt, ob die aktivierte Route wiederverwendet werden soll (<code>true</code>) oder nicht (<code>false</code>). Im letzteren Fall wird die Komponente automatisch neu geladen, wenn die aktivierte Route sich ändert. Wir ändern entsprechend die <code>city.component.ts</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="22:1"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">city.component.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Component</span><span class="p">,</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ActivatedRoute</span><span class="p">,</span><span class="w"> </span><span class="nx">Router</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;src/app/shared/data&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DataService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;src/app/shared/data.service&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">selector</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;app-city&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">templateUrl</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./city.component.html&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">styleUrls</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;./city.component.css&#39;</span><span class="p">]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">CityComponent</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">OnInit</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nx">stadt</span><span class="o">!:</span><span class="w"> </span><span class="nx">Data</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="nx">route</span><span class="o">:</span><span class="w"> </span><span class="nx">ActivatedRoute</span><span class="p">,</span><span class="w"></span>
</span><span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="nx">ds</span><span class="o">:</span><span class="w"> </span><span class="nx">DataService</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="nx">router</span><span class="o">:</span><span class="w"> </span><span class="nx">Router</span><span class="w"></span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">routeReuseStrategy</span><span class="p">.</span><span class="nx">shouldReuseRoute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
</span><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">stadt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">ds</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Die Notation <code>() =&gt; false</code> ist sicherlich ungewöhnlich. Dabei handelt es sich um eine Funktion in <em>Arrow-Notation</em>. </p>
<h3 id="arrow-funktionen">Arrow-Funktionen<a class="headerlink" href="#arrow-funktionen" title="Permanent link">&para;</a></h3>
<p><em>Arrow-Funktionen</em> werden auch als <em>Lambda-Ausdrücke</em> bezeichnet. Eine Arrow-Funktion ist eine Kurzschreibweise für eine anonyme Funktion. Anstelle von <code>function()</code> schreibt man nur noch einen Pfeil. Enthält die anonyme Funktion sogar nur ein Argument (Parameter), kann man links vom Pfeil sogar die runden Klammern weglassen. Auch die geschweiften Klammern des Funktionskörpers können entfallen. Wenn die geschweiften Klammwern weggelassen werden, dann entspricht die rechte Seite des Pfeils dem Rückgabewert der Funktion, d.h. es kann sogar <code>return</code> weggelassen werden. Folgende Funktionsdefinitionen sind äquivalent:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="nx">foo</span><span class="o">+</span><span class="mf">1</span><span class="p">;}</span><span class="w"></span>
<span class="p">(</span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="nx">foo</span><span class="o">+</span><span class="mf">1</span><span class="p">;}</span><span class="w"></span>
<span class="nx">foo</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="nx">foo</span><span class="o">+</span><span class="mf">1</span><span class="p">;}</span><span class="w"></span>
<span class="nx">foo</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">foo</span><span class="o">+</span><span class="mf">1</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="routen-absichern-mit-guards">Routen absichern mit Guards<a class="headerlink" href="#routen-absichern-mit-guards" title="Permanent link">&para;</a></h2>
<p><em>Guards</em> sind Funktionen, die entscheiden, ob ein Navigationsschritt ausgeführt werden darf oder nicht. Diese Entscheidung wird durch den Rückgabewert der Funktion ausgedrückt. Es gibt drei verschiedene Varainten für den Rückgabewert: </p>
<ul>
<li><code>true</code>: der Navigationsschritt wird ausgeführt, </li>
<li><code>false</code>: der Navigationsschritt wird nicht ausgeführt, </li>
<li>Rückgabe vom Typ <code>URLTree</code>: die Navigation wird abgebrochen und eine Navigation zu einer anderen Route gestartet. </li>
</ul>
<p><em>Guards</em> werden immer als Eigenschaft einer Route definiert, also bereits bei der Definition der Route im <code>routes</code>-Array in <code>app-routing.module.ts</code>. Es gibt vier verschiedene Guard-Typen:</p>
<ul>
<li><code>CanAvtivate</code>: entscheidet, ob eine Route aktiviert werden darf,</li>
<li><code>CanAvtivateChild</code>: entscheidet, ob die Kind-Routen einer Route aktiviert werden dürfen (Kind-Routen haben wir uns bis jetzt noch nicht angeschaut),</li>
<li><code>CanDeaktivate</code>: entscheidet, ob eine Route deaktiviert werden darf,</li>
<li><code>CanLoad</code>: entscheidet, ob ein Module (asynchron) geladen werden darf. </li>
</ul>
<p>Uns genügt es, <code>CanActivate</code> zu betrachten. Damit wollen wir regulieren, dass nur eine bestimmte <em>Rolle</em> von Nutzern eine bestimmte Komponente verwenden darf. Wir erstellen uns einen solchen Guard mithilfe des Angular CLI und nennen den Guard <code>authguard</code>:</p>
<div class="highlight"><pre><span></span><code>ng g guard authguard --implements CanActivate
</code></pre></div>
<p>Dadurch entsteht eine Datei <code>authguard.guard.ts</code> mit folgendem Inhalt:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="23:1"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">authguard.guard.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span><span class="w"> </span><span class="nx">CanActivate</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterStateSnapshot</span><span class="p">,</span><span class="w"> </span><span class="nx">UrlTree</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Observable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;rxjs&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthguardGuard</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">CanActivate</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="nx">canActivate</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nx">route</span><span class="o">:</span><span class="w"> </span><span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="nx">RouterStateSnapshot</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Observable</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">UrlTree</span><span class="o">&gt;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">boolean</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">UrlTree</span><span class="o">&gt;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">UrlTree</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Um dieses Beispiel etwas realistischer zu gestalten, erstellen wir noch einen <code>auth</code>-Service, der später unserer Nutzer- und Rollenverwaltung dient. Wir nennen ihn <code>auth</code> und erstellen ihn ebenfalls im <code>shared</code>-Ordner:</p>
<div class="highlight"><pre><span></span><code>ng g service shared/auth
</code></pre></div>
<p>In diesen Service fügen wir nur eine dummy-Funktion <code>isAuthenticated()</code> ein, die ein <code>true</code> oder <code>false</code> zurückliefert:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">shared/auth.service.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="hll"><span class="w">  </span><span class="nx">isAuthenticated</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="w">  </span><span class="p">}</span><span class="w"></span>
</span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Diesen Service und davon insbesondere die <code>isAuthenticated</code>-Funktion verwenden wir in unserem <code>auth</code>-Guard:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="25:1"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">authguard.guard.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Injectable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span><span class="w"> </span><span class="nx">CanActivate</span><span class="p">,</span><span class="w"> </span><span class="nx">Router</span><span class="p">,</span><span class="w"> </span><span class="nx">RouterStateSnapshot</span><span class="p">,</span><span class="w"> </span><span class="nx">UrlTree</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./shared/auth.service&#39;</span><span class="p">;</span><span class="w"></span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">providedIn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthguardGuard</span><span class="w"> </span><span class="kr">implements</span><span class="w"> </span><span class="nx">CanActivate</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="kr">as</span><span class="o">:</span><span class="w"> </span><span class="nx">AuthService</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="nx">router</span><span class="o">:</span><span class="w"> </span><span class="nx">Router</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="w">  </span><span class="nx">canActivate</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nx">route</span><span class="o">:</span><span class="w"> </span><span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="nx">RouterStateSnapshot</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">UrlTree</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="kr">as</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">()</span><span class="w"></span>
<span class="w">      </span><span class="o">?</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">parseUrl</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Erläuterungen der Anpassungen:</p>
<ul>
<li>Zunächst haben wir die Rückgabetypen der <code>canActivate()</code>-Funktion auf <code>boolean</code> und <code>UrlTree</code> reduziert. Die anderen möglichen Rückgabetypen <code>Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt;</code> haben wir gelöscht (und somit auch <code>import { Observable } from 'rxjs';</code>) - siehe Zeile <code>17</code>.</li>
<li>Dann haben wir den <code>AuthService</code> und auch das <code>Router</code>-Modul per <em>dependency injection</em> in den Konstruktor der <code>AuthGuard</code>-Klasse eingefügt, um Beides verwenden zu können (Zeilen <code>10-13</code>). </li>
<li>Dann haben wir die Berechnung des Rückgabewertes der <code>canActivate</code>-Funktion ergänzt. Der Rückgabewert ist abhängig vom Rückgaewert der <code>isAuthenticated()</code>-Funktion des <code>AuthServices</code>. Liefert diese Funktion ein <code>true</code> zurück, dann gibt auch die <code>canActivate()</code>-Funktion ein <code>true</code> zurück (Zeile <code>19</code>). Ist der Rückgabewert jedoch <code>false</code>, dann liefert die <code>canActivate()</code>-Funktion ein <code>UrlTree</code> in der Form zurück, dass die Navigation auf die Route <code>/login</code> umgeleitet wird. </li>
</ul>
<p>Jetzt können wir diesen Guard verwenden und passen dafür die <code>app-routing.module.ts</code> an. Wir wollen hier exemplarisch demonstrieren, dass die <code>/cities</code>- und <code>/cities/:id</code>-Routen nur dann aktiviert werden können, wenn die <code>canActivate()</code>-Funktion des <code>AuthGuard</code>s ein <code>true</code> zurückliefert. Dazu sind folgende Änderungen in der <code>app-routing.module.ts</code> notwendig: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">app-routing.module.ts</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AuthguardGuard</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./authguard.guard&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CityComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./cities/city/city.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./login/login.component&#39;</span><span class="p">;</span><span class="w"></span>
<span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./about/about.component&#39;</span><span class="p">;</span><span class="w"></span>
</span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">NgModule</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RouterModule</span><span class="p">,</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./cities/cities.component&#39;</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">routes</span><span class="o">:</span><span class="w"> </span><span class="nx">Routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">HomeComponent</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">pathMatch</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;full&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;about&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">AboutComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;login&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">LoginComponent</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cities&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CitiesComponent</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">canActivate</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">AuthguardGuard</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cities/:id&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="nx">CityComponent</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">canActivate</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">AuthguardGuard</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">declarations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">  </span><span class="nx">imports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">exports</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">RouterModule</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppRoutingModule</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Wenn wir nun auf <code>/cities</code> navigieren wollen, dann werden wir direkt auf die <code>/login</code>-Route umgeleitet. Die <code>CitiesComponent</code> und auch die <code>CityComponent</code> bleiben gesperrt solange <code>isAuthenticated()</code> ein <code>false</code> zurückliefert. </p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben die wesentlichsten Konzepte des Routing kennengelernt. Darüber hinaus gibt es noch Themen für Fortgeschrittene, wie z.B. lazy-loading von Modulen (Module erst dann laden, wenn man sie wirklich erst aufruft), Routen für Kindkomponenten, mehrere outlets usw. Aber uns genügen die hier erläuterten wesentlichen Konzepte. </p>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
      
        
        <a href="../angular2/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: JSON und Direktiven" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Zurück
              </span>
              JSON und Direktiven
            </div>
          </div>
        </a>
      
      
        
        <a href="../backend/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Backend (MongoDB)" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Weiter
              </span>
              Backend (MongoDB)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Jörn Freiheit
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.config.lang": "de", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Suche", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version.title": "Version ausw\u00e4hlen"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>